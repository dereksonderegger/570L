<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>A Sufficient Introduction to R</title>
  <meta name="description" content="These notes serve as an introduction to R, but certainly is not comprehensive. The intention is to teach students enough to be able to work with data frames and make graphs using ggplot2. I also cover a range of common data issues that PhD students often have to address.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="A Sufficient Introduction to R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="These notes serve as an introduction to R, but certainly is not comprehensive. The intention is to teach students enough to be able to work with data frames and make graphs using ggplot2. I also cover a range of common data issues that PhD students often have to address." />
  <meta name="github-repo" content="dereksonderegger/570L" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A Sufficient Introduction to R" />
  
  <meta name="twitter:description" content="These notes serve as an introduction to R, but certainly is not comprehensive. The intention is to teach students enough to be able to work with data frames and make graphs using ggplot2. I also cover a range of common data issues that PhD students often have to address." />
  

<meta name="author" content="Derek L. Sonderegger">


<meta name="date" content="2018-03-29">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="12-user-defined-functions.html">
<link rel="next" href="14-dates-and-times.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Sufficient Introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="1-introduction.html"><a href="1-introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="1-introduction.html"><a href="1-introduction.html#r-as-a-simple-calculator"><i class="fa fa-check"></i><b>1.1</b> R as a simple calculator</a></li>
<li class="chapter" data-level="1.2" data-path="1-introduction.html"><a href="1-introduction.html#assignment"><i class="fa fa-check"></i><b>1.2</b> Assignment</a></li>
<li class="chapter" data-level="1.3" data-path="1-introduction.html"><a href="1-introduction.html#data-frames"><i class="fa fa-check"></i><b>1.3</b> Data frames</a></li>
<li class="chapter" data-level="1.4" data-path="1-introduction.html"><a href="1-introduction.html#packages"><i class="fa fa-check"></i><b>1.4</b> Packages</a></li>
<li class="chapter" data-level="1.5" data-path="1-introduction.html"><a href="1-introduction.html#summarizing-data"><i class="fa fa-check"></i><b>1.5</b> Summarizing Data</a></li>
<li class="chapter" data-level="1.6" data-path="1-introduction.html"><a href="1-introduction.html#graphing-data"><i class="fa fa-check"></i><b>1.6</b> Graphing Data</a><ul>
<li class="chapter" data-level="1.6.1" data-path="1-introduction.html"><a href="1-introduction.html#bar-charts"><i class="fa fa-check"></i><b>1.6.1</b> Bar Charts</a></li>
<li class="chapter" data-level="1.6.2" data-path="1-introduction.html"><a href="1-introduction.html#histograms"><i class="fa fa-check"></i><b>1.6.2</b> Histograms</a></li>
<li class="chapter" data-level="1.6.3" data-path="1-introduction.html"><a href="1-introduction.html#scatterplots"><i class="fa fa-check"></i><b>1.6.3</b> Scatterplots</a></li>
<li class="chapter" data-level="1.6.4" data-path="1-introduction.html"><a href="1-introduction.html#box-plots"><i class="fa fa-check"></i><b>1.6.4</b> Box Plots</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="1-introduction.html"><a href="1-introduction.html#scripts-and-rmarkdown"><i class="fa fa-check"></i><b>1.7</b> Scripts and RMarkdown</a><ul>
<li class="chapter" data-level="1.7.1" data-path="1-introduction.html"><a href="1-introduction.html#r-scripts-.r-files"><i class="fa fa-check"></i><b>1.7.1</b> R Scripts (.R files)</a></li>
<li class="chapter" data-level="1.7.2" data-path="1-introduction.html"><a href="1-introduction.html#r-markdown-.rmd-files"><i class="fa fa-check"></i><b>1.7.2</b> R Markdown (.Rmd files)</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="1-introduction.html"><a href="1-introduction.html#exercises"><i class="fa fa-check"></i><b>1.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-vectors.html"><a href="2-vectors.html"><i class="fa fa-check"></i><b>2</b> Vectors</a><ul>
<li class="chapter" data-level="2.1" data-path="2-vectors.html"><a href="2-vectors.html#accessing-vector-elements"><i class="fa fa-check"></i><b>2.1</b> Accessing Vector Elements</a></li>
<li class="chapter" data-level="2.2" data-path="2-vectors.html"><a href="2-vectors.html#scalar-functions-applied-to-vectors"><i class="fa fa-check"></i><b>2.2</b> Scalar Functions Applied to Vectors</a></li>
<li class="chapter" data-level="2.3" data-path="2-vectors.html"><a href="2-vectors.html#vector-algebra"><i class="fa fa-check"></i><b>2.3</b> Vector Algebra</a></li>
<li class="chapter" data-level="2.4" data-path="2-vectors.html"><a href="2-vectors.html#commonly-used-vector-functions"><i class="fa fa-check"></i><b>2.4</b> Commonly Used Vector Functions</a></li>
<li class="chapter" data-level="2.5" data-path="2-vectors.html"><a href="2-vectors.html#exercises-1"><i class="fa fa-check"></i><b>2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html"><i class="fa fa-check"></i><b>3</b> Statistical Tables</a><ul>
<li class="chapter" data-level="3.1" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#mosaicplotdist-function"><i class="fa fa-check"></i><b>3.1</b> <code>mosaic::plotDist()</code> function</a></li>
<li class="chapter" data-level="3.2" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#base-r-functions"><i class="fa fa-check"></i><b>3.2</b> Base R functions</a><ul>
<li class="chapter" data-level="3.2.1" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#d-function"><i class="fa fa-check"></i><b>3.2.1</b> d-function</a></li>
<li class="chapter" data-level="3.2.2" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#p-function"><i class="fa fa-check"></i><b>3.2.2</b> p-function</a></li>
<li class="chapter" data-level="3.2.3" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#q-function"><i class="fa fa-check"></i><b>3.2.3</b> <code>q</code>-function</a></li>
<li class="chapter" data-level="3.2.4" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#r-function"><i class="fa fa-check"></i><b>3.2.4</b> r-function</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="3-statistical-tables.html"><a href="3-statistical-tables.html#exercises-2"><i class="fa fa-check"></i><b>3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-data-types.html"><a href="4-data-types.html"><i class="fa fa-check"></i><b>4</b> Data Types</a><ul>
<li class="chapter" data-level="4.1" data-path="4-data-types.html"><a href="4-data-types.html#integers-and-numerics"><i class="fa fa-check"></i><b>4.1</b> Integers and Numerics</a></li>
<li class="chapter" data-level="4.2" data-path="4-data-types.html"><a href="4-data-types.html#character-strings"><i class="fa fa-check"></i><b>4.2</b> Character Strings</a></li>
<li class="chapter" data-level="4.3" data-path="4-data-types.html"><a href="4-data-types.html#factors"><i class="fa fa-check"></i><b>4.3</b> Factors</a></li>
<li class="chapter" data-level="4.4" data-path="4-data-types.html"><a href="4-data-types.html#logicals"><i class="fa fa-check"></i><b>4.4</b> Logicals</a></li>
<li class="chapter" data-level="4.5" data-path="4-data-types.html"><a href="4-data-types.html#exercises-3"><i class="fa fa-check"></i><b>4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-matrices-data-frames-and-lists.html"><a href="5-matrices-data-frames-and-lists.html"><i class="fa fa-check"></i><b>5</b> Matrices, Data Frames, and Lists</a><ul>
<li class="chapter" data-level="5.1" data-path="5-matrices-data-frames-and-lists.html"><a href="5-matrices-data-frames-and-lists.html#matrices"><i class="fa fa-check"></i><b>5.1</b> Matrices</a></li>
<li class="chapter" data-level="5.2" data-path="5-matrices-data-frames-and-lists.html"><a href="5-matrices-data-frames-and-lists.html#data-frames-1"><i class="fa fa-check"></i><b>5.2</b> Data Frames</a></li>
<li class="chapter" data-level="5.3" data-path="5-matrices-data-frames-and-lists.html"><a href="5-matrices-data-frames-and-lists.html#lists"><i class="fa fa-check"></i><b>5.3</b> Lists</a></li>
<li class="chapter" data-level="5.4" data-path="5-matrices-data-frames-and-lists.html"><a href="5-matrices-data-frames-and-lists.html#exercises-4"><i class="fa fa-check"></i><b>5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-importing-data.html"><a href="6-importing-data.html"><i class="fa fa-check"></i><b>6</b> Importing Data</a><ul>
<li class="chapter" data-level="6.1" data-path="6-importing-data.html"><a href="6-importing-data.html#working-directory"><i class="fa fa-check"></i><b>6.1</b> Working directory</a></li>
<li class="chapter" data-level="6.2" data-path="6-importing-data.html"><a href="6-importing-data.html#comma-separated-data"><i class="fa fa-check"></i><b>6.2</b> Comma Separated Data</a></li>
<li class="chapter" data-level="6.3" data-path="6-importing-data.html"><a href="6-importing-data.html#ms-excel"><i class="fa fa-check"></i><b>6.3</b> MS Excel</a></li>
<li class="chapter" data-level="6.4" data-path="6-importing-data.html"><a href="6-importing-data.html#exercises-5"><i class="fa fa-check"></i><b>6.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-data-manipulation.html"><a href="7-data-manipulation.html"><i class="fa fa-check"></i><b>7</b> Data Manipulation</a><ul>
<li class="chapter" data-level="7.1" data-path="7-data-manipulation.html"><a href="7-data-manipulation.html#classical-functions-for-summarizing-rows-and-columns"><i class="fa fa-check"></i><b>7.1</b> Classical functions for summarizing rows and columns</a><ul>
<li class="chapter" data-level="7.1.1" data-path="7-data-manipulation.html"><a href="7-data-manipulation.html#summary"><i class="fa fa-check"></i><b>7.1.1</b> <code>summary()</code></a></li>
<li class="chapter" data-level="7.1.2" data-path="7-data-manipulation.html"><a href="7-data-manipulation.html#apply"><i class="fa fa-check"></i><b>7.1.2</b> <code>apply()</code></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="7-data-manipulation.html"><a href="7-data-manipulation.html#package-dplyr"><i class="fa fa-check"></i><b>7.2</b> Package <code>dplyr</code></a><ul>
<li class="chapter" data-level="7.2.1" data-path="7-data-manipulation.html"><a href="7-data-manipulation.html#verbs"><i class="fa fa-check"></i><b>7.2.1</b> Verbs</a></li>
<li class="chapter" data-level="7.2.2" data-path="7-data-manipulation.html"><a href="7-data-manipulation.html#split-apply-combine"><i class="fa fa-check"></i><b>7.2.2</b> Split, apply, combine</a></li>
<li class="chapter" data-level="7.2.3" data-path="7-data-manipulation.html"><a href="7-data-manipulation.html#chaining-commands-together"><i class="fa fa-check"></i><b>7.2.3</b> Chaining commands together</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="7-data-manipulation.html"><a href="7-data-manipulation.html#exercises-6"><i class="fa fa-check"></i><b>7.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8-data-reshaping.html"><a href="8-data-reshaping.html"><i class="fa fa-check"></i><b>8</b> Data Reshaping</a><ul>
<li class="chapter" data-level="8.1" data-path="8-data-reshaping.html"><a href="8-data-reshaping.html#tidyr"><i class="fa fa-check"></i><b>8.1</b> <code>tidyr</code></a><ul>
<li class="chapter" data-level="8.1.1" data-path="8-data-reshaping.html"><a href="8-data-reshaping.html#verbs-1"><i class="fa fa-check"></i><b>8.1.1</b> Verbs</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="8-data-reshaping.html"><a href="8-data-reshaping.html#storing-data-in-multiple-tables"><i class="fa fa-check"></i><b>8.2</b> Storing Data in Multiple Tables</a></li>
<li class="chapter" data-level="8.3" data-path="8-data-reshaping.html"><a href="8-data-reshaping.html#table-joins"><i class="fa fa-check"></i><b>8.3</b> Table Joins</a></li>
<li class="chapter" data-level="8.4" data-path="8-data-reshaping.html"><a href="8-data-reshaping.html#exercises-7"><i class="fa fa-check"></i><b>8.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html"><i class="fa fa-check"></i><b>9</b> Graphing using <code>ggplot2</code></a><ul>
<li class="chapter" data-level="9.1" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#basic-graphs"><i class="fa fa-check"></i><b>9.1</b> Basic Graphs</a><ul>
<li class="chapter" data-level="9.1.1" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#bar-charts-1"><i class="fa fa-check"></i><b>9.1.1</b> Bar Charts</a></li>
<li class="chapter" data-level="9.1.2" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#histograms-1"><i class="fa fa-check"></i><b>9.1.2</b> Histograms</a></li>
<li class="chapter" data-level="9.1.3" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#scatterplots-1"><i class="fa fa-check"></i><b>9.1.3</b> Scatterplots</a></li>
<li class="chapter" data-level="9.1.4" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#box-plots-1"><i class="fa fa-check"></i><b>9.1.4</b> Box Plots</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#fine-tuning"><i class="fa fa-check"></i><b>9.2</b> Fine Tuning</a><ul>
<li class="chapter" data-level="9.2.1" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#labels"><i class="fa fa-check"></i><b>9.2.1</b> Labels</a></li>
<li class="chapter" data-level="9.2.2" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#color-scales"><i class="fa fa-check"></i><b>9.2.2</b> Color Scales</a></li>
<li class="chapter" data-level="9.2.3" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#adjusting-axes"><i class="fa fa-check"></i><b>9.2.3</b> Adjusting axes</a></li>
<li class="chapter" data-level="9.2.4" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#zooming-inout"><i class="fa fa-check"></i><b>9.2.4</b> Zooming in/out</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#cookbook-examples"><i class="fa fa-check"></i><b>9.3</b> Cookbook Examples</a><ul>
<li class="chapter" data-level="9.3.1" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#scatterplot-with-prediction-ribbons"><i class="fa fa-check"></i><b>9.3.1</b> Scatterplot with prediction ribbons</a></li>
<li class="chapter" data-level="9.3.2" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#bar-plot"><i class="fa fa-check"></i><b>9.3.2</b> Bar Plot</a></li>
<li class="chapter" data-level="9.3.3" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#distributions"><i class="fa fa-check"></i><b>9.3.3</b> Distributions</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="9-graphing-using-ggplot2.html"><a href="9-graphing-using-ggplot2.html#exercises-8"><i class="fa fa-check"></i><b>9.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-more-ggplot2.html"><a href="10-more-ggplot2.html"><i class="fa fa-check"></i><b>10</b> More <code>ggplot2</code></a><ul>
<li class="chapter" data-level="10.1" data-path="10-more-ggplot2.html"><a href="10-more-ggplot2.html#faceting"><i class="fa fa-check"></i><b>10.1</b> Faceting</a></li>
<li class="chapter" data-level="10.2" data-path="10-more-ggplot2.html"><a href="10-more-ggplot2.html#modifying-scales"><i class="fa fa-check"></i><b>10.2</b> Modifying Scales</a><ul>
<li class="chapter" data-level="10.2.1" data-path="10-more-ggplot2.html"><a href="10-more-ggplot2.html#log-scales"><i class="fa fa-check"></i><b>10.2.1</b> Log scales</a></li>
<li class="chapter" data-level="10.2.2" data-path="10-more-ggplot2.html"><a href="10-more-ggplot2.html#arbitrary-transformations"><i class="fa fa-check"></i><b>10.2.2</b> Arbitrary transformations</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="10-more-ggplot2.html"><a href="10-more-ggplot2.html#multi-plot"><i class="fa fa-check"></i><b>10.3</b> Multi-plot</a></li>
<li class="chapter" data-level="10.4" data-path="10-more-ggplot2.html"><a href="10-more-ggplot2.html#themes"><i class="fa fa-check"></i><b>10.4</b> Themes</a></li>
<li class="chapter" data-level="10.5" data-path="10-more-ggplot2.html"><a href="10-more-ggplot2.html#exercises-9"><i class="fa fa-check"></i><b>10.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-flow-control.html"><a href="11-flow-control.html"><i class="fa fa-check"></i><b>11</b> Flow Control</a><ul>
<li class="chapter" data-level="11.1" data-path="11-flow-control.html"><a href="11-flow-control.html#decision-statements"><i class="fa fa-check"></i><b>11.1</b> Decision statements</a></li>
<li class="chapter" data-level="11.2" data-path="11-flow-control.html"><a href="11-flow-control.html#loops"><i class="fa fa-check"></i><b>11.2</b> Loops</a><ul>
<li class="chapter" data-level="11.2.1" data-path="11-flow-control.html"><a href="11-flow-control.html#while-loops"><i class="fa fa-check"></i><b>11.2.1</b> <code>while</code> Loops</a></li>
<li class="chapter" data-level="11.2.2" data-path="11-flow-control.html"><a href="11-flow-control.html#for-loops"><i class="fa fa-check"></i><b>11.2.2</b> <code>for</code> Loops</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="11-flow-control.html"><a href="11-flow-control.html#exercises-10"><i class="fa fa-check"></i><b>11.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-user-defined-functions.html"><a href="12-user-defined-functions.html"><i class="fa fa-check"></i><b>12</b> User Defined Functions</a><ul>
<li class="chapter" data-level="12.1" data-path="12-user-defined-functions.html"><a href="12-user-defined-functions.html#basic-function-definition"><i class="fa fa-check"></i><b>12.1</b> Basic function definition</a></li>
<li class="chapter" data-level="12.2" data-path="12-user-defined-functions.html"><a href="12-user-defined-functions.html#parameter-defaults"><i class="fa fa-check"></i><b>12.2</b> Parameter Defaults</a></li>
<li class="chapter" data-level="12.3" data-path="12-user-defined-functions.html"><a href="12-user-defined-functions.html#ellipses"><i class="fa fa-check"></i><b>12.3</b> Ellipses</a></li>
<li class="chapter" data-level="12.4" data-path="12-user-defined-functions.html"><a href="12-user-defined-functions.html#function-overloading"><i class="fa fa-check"></i><b>12.4</b> Function Overloading</a></li>
<li class="chapter" data-level="12.5" data-path="12-user-defined-functions.html"><a href="12-user-defined-functions.html#scope"><i class="fa fa-check"></i><b>12.5</b> Scope</a></li>
<li class="chapter" data-level="12.6" data-path="12-user-defined-functions.html"><a href="12-user-defined-functions.html#exercises-11"><i class="fa fa-check"></i><b>12.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html"><i class="fa fa-check"></i><b>13</b> String Manipulation</a><ul>
<li class="chapter" data-level="13.1" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#base-function"><i class="fa fa-check"></i><b>13.1</b> Base function</a></li>
<li class="chapter" data-level="13.2" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#package-stringr-basic-operations"><i class="fa fa-check"></i><b>13.2</b> Package <code>stringr</code>: basic operations</a><ul>
<li class="chapter" data-level="13.2.1" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#concatenating-with-str_c-or-str_join"><i class="fa fa-check"></i><b>13.2.1</b> Concatenating with <code>str_c()</code> or <code>str_join()</code></a></li>
<li class="chapter" data-level="13.2.2" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#calculating-string-length-with-str_length"><i class="fa fa-check"></i><b>13.2.2</b> Calculating string length with <code>str_length()</code></a></li>
<li class="chapter" data-level="13.2.3" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#extracting-substrings-with-str_sub"><i class="fa fa-check"></i><b>13.2.3</b> Extracting substrings with <code>str_sub()</code></a></li>
<li class="chapter" data-level="13.2.4" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#pad-a-string-with-str_pad"><i class="fa fa-check"></i><b>13.2.4</b> Pad a string with <code>str_pad()</code></a></li>
<li class="chapter" data-level="13.2.5" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#trim-a-string-with-str_trim"><i class="fa fa-check"></i><b>13.2.5</b> Trim a string with <code>str_trim()</code></a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#package-stringr-pattern-matching"><i class="fa fa-check"></i><b>13.3</b> Package <code>stringr</code>: Pattern Matching</a><ul>
<li class="chapter" data-level="13.3.1" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#detecting-a-pattern-using-str_detect"><i class="fa fa-check"></i><b>13.3.1</b> Detecting a pattern using str_detect()</a></li>
<li class="chapter" data-level="13.3.2" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#locating-a-pattern-using-str_locate"><i class="fa fa-check"></i><b>13.3.2</b> Locating a pattern using str_locate()</a></li>
<li class="chapter" data-level="13.3.3" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#replacing-substrings-using-str_replace"><i class="fa fa-check"></i><b>13.3.3</b> Replacing substrings using <code>str_replace()</code></a></li>
<li class="chapter" data-level="13.3.4" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#splitting-into-substrings-using-str_split"><i class="fa fa-check"></i><b>13.3.4</b> Splitting into substrings using <code>str_split()</code></a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#regular-expressions"><i class="fa fa-check"></i><b>13.4</b> Regular Expressions</a></li>
<li class="chapter" data-level="13.5" data-path="13-string-manipulation.html"><a href="13-string-manipulation.html#exercises-12"><i class="fa fa-check"></i><b>13.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="14-dates-and-times.html"><a href="14-dates-and-times.html"><i class="fa fa-check"></i><b>14</b> Dates and Times</a><ul>
<li class="chapter" data-level="14.1" data-path="14-dates-and-times.html"><a href="14-dates-and-times.html#creating-date-and-time-objects"><i class="fa fa-check"></i><b>14.1</b> Creating Date and Time objects</a></li>
<li class="chapter" data-level="14.2" data-path="14-dates-and-times.html"><a href="14-dates-and-times.html#extracting-information"><i class="fa fa-check"></i><b>14.2</b> Extracting information</a></li>
<li class="chapter" data-level="14.3" data-path="14-dates-and-times.html"><a href="14-dates-and-times.html#arithmetic-on-dates"><i class="fa fa-check"></i><b>14.3</b> Arithmetic on Dates</a></li>
<li class="chapter" data-level="14.4" data-path="14-dates-and-times.html"><a href="14-dates-and-times.html#exercises-13"><i class="fa fa-check"></i><b>14.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="15-speeding-up-r.html"><a href="15-speeding-up-r.html"><i class="fa fa-check"></i><b>15</b> Speeding up R</a><ul>
<li class="chapter" data-level="15.1" data-path="15-speeding-up-r.html"><a href="15-speeding-up-r.html#faster-for-loops"><i class="fa fa-check"></i><b>15.1</b> Faster for loops?</a></li>
<li class="chapter" data-level="15.2" data-path="15-speeding-up-r.html"><a href="15-speeding-up-r.html#vectorizing-loops"><i class="fa fa-check"></i><b>15.2</b> Vectorizing loops</a></li>
<li class="chapter" data-level="15.3" data-path="15-speeding-up-r.html"><a href="15-speeding-up-r.html#parallel-processing"><i class="fa fa-check"></i><b>15.3</b> Parallel Processing</a></li>
<li class="chapter" data-level="15.4" data-path="15-speeding-up-r.html"><a href="15-speeding-up-r.html#parallelizing-for-loops"><i class="fa fa-check"></i><b>15.4</b> Parallelizing for loops</a></li>
<li class="chapter" data-level="15.5" data-path="15-speeding-up-r.html"><a href="15-speeding-up-r.html#parallel-aware-functions"><i class="fa fa-check"></i><b>15.5</b> Parallel Aware Functions</a><ul>
<li class="chapter" data-level="15.5.1" data-path="15-speeding-up-r.html"><a href="15-speeding-up-r.html#bootboot"><i class="fa fa-check"></i><b>15.5.1</b> <code>boot::boot</code></a></li>
<li class="chapter" data-level="15.5.2" data-path="15-speeding-up-r.html"><a href="15-speeding-up-r.html#carettrain"><i class="fa fa-check"></i><b>15.5.2</b> <code>caret::train</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="16-rmarkdown-tricks.html"><a href="16-rmarkdown-tricks.html"><i class="fa fa-check"></i><b>16</b> Rmarkdown Tricks</a><ul>
<li class="chapter" data-level="16.1" data-path="16-rmarkdown-tricks.html"><a href="16-rmarkdown-tricks.html#mathematical-expressions"><i class="fa fa-check"></i><b>16.1</b> Mathematical expressions</a></li>
<li class="chapter" data-level="16.2" data-path="16-rmarkdown-tricks.html"><a href="16-rmarkdown-tricks.html#tables"><i class="fa fa-check"></i><b>16.2</b> Tables</a><ul>
<li class="chapter" data-level="16.2.1" data-path="16-rmarkdown-tricks.html"><a href="16-rmarkdown-tricks.html#simple-tables"><i class="fa fa-check"></i><b>16.2.1</b> Simple Tables</a></li>
<li class="chapter" data-level="16.2.2" data-path="16-rmarkdown-tricks.html"><a href="16-rmarkdown-tricks.html#grid-tables"><i class="fa fa-check"></i><b>16.2.2</b> Grid Tables</a></li>
<li class="chapter" data-level="16.2.3" data-path="16-rmarkdown-tricks.html"><a href="16-rmarkdown-tricks.html#pipe-tables"><i class="fa fa-check"></i><b>16.2.3</b> Pipe Tables</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="16-rmarkdown-tricks.html"><a href="16-rmarkdown-tricks.html#r-functions-to-produce-table-code."><i class="fa fa-check"></i><b>16.3</b> R functions to produce table code.</a><ul>
<li class="chapter" data-level="16.3.1" data-path="16-rmarkdown-tricks.html"><a href="16-rmarkdown-tricks.html#knitrkable"><i class="fa fa-check"></i><b>16.3.1</b> <code>knitr::kable</code></a></li>
<li class="chapter" data-level="16.3.2" data-path="16-rmarkdown-tricks.html"><a href="16-rmarkdown-tricks.html#package-pander"><i class="fa fa-check"></i><b>16.3.2</b> Package <code>pander</code></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Sufficient Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="string-manipulation" class="section level1">
<h1><span class="header-section-number">Chapter 13</span> String Manipulation</h1>
<p>Strings make up a very important class of data. Data being read into R often come in the form of character strings where different parts might mean different things. For example a sample ID of “R1_P2_C1_2012_05_28” might represent data from Region 1, Park 2, Camera 1, taken on May 28, 2012. It is important that we have a set of utilities that allow us to split and combine character strings in a easy and consistent fashion.</p>
<p>Unfortunately, the utilities included in the base version of R are somewhat inconsistent and were not designed to work nicely together. Hadley Wickham, the developer of <code>ggplot2</code> and <code>dplyr</code> has this to say:</p>
<blockquote>
<p>“R provides a solid set of string operations, but because they have grown organically over time, they can be inconsistent and a little hard to learn. Additionally, they lag behind the string operations in other programming languages, so that some things that are easy to do in languages like Ruby or Python are rather hard to do in R.” – Hadley Wickham</p>
</blockquote>
<p>For this chapter we will introduce the most commonly used functions from the base version of R that you might use or see in other people’s code. Second, we introduce Dr Wickham’s <code>stringr</code> package that provides many useful functions that operate in a consistent manner.</p>
<div id="base-function" class="section level2">
<h2><span class="header-section-number">13.1</span> Base function</h2>
<p>1.1.1 <code>paste()</code></p>
<p>The most basic thing we will want to do is to combine two strings or to combine a string with a numerical value. The <code>paste()</code> command will take one or more R objects and converts them to character strings and then pastes them together to form one or more character strings. It has the form:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>( ..., <span class="dt">sep =</span> <span class="st">&#39; &#39;</span>, <span class="dt">collapse =</span> <span class="ot">NULL</span> )</code></pre></div>
<p>The <code>...</code> piece means that we can pass any number of objects to be pasted together. The <code>sep</code> argument gives the string that separates the strings to be joined and the collapse argument that specifies if a simplification should be performed after being pasting together.</p>
<p>Suppose we want to combine the strings “Peanut butter” and “Jelly” then we could execute:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>( <span class="st">&quot;PeanutButter&quot;</span>, <span class="st">&quot;Jelly&quot;</span> )</code></pre></div>
<pre><code>## [1] &quot;PeanutButter Jelly&quot;</code></pre>
<p>Notice that without specifying the separator character, R chose to put a space between the two strings. We could specify whatever we wanted:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>( <span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;World&quot;</span>, <span class="dt">sep=</span><span class="st">&#39;_&#39;</span> )</code></pre></div>
<pre><code>## [1] &quot;Hello_World&quot;</code></pre>
<p>Also we can combine strings with numerical values</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>( <span class="st">&quot;Pi is equal to&quot;</span>, pi )</code></pre></div>
<pre><code>## [1] &quot;Pi is equal to 3.14159265358979&quot;</code></pre>
<p>We can combine vectors of similar or different lengths as well. By default R assumes that you want to produce a vector of character strings as output.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>( <span class="st">&quot;n =&quot;</span>, <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">25</span>,<span class="dv">100</span>) )</code></pre></div>
<pre><code>## [1] &quot;n = 5&quot;   &quot;n = 25&quot;  &quot;n = 100&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">first.names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Robb&#39;</span>,<span class="st">&#39;Stannis&#39;</span>,<span class="st">&#39;Daenerys&#39;</span>)
last.names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Stark&#39;</span>,<span class="st">&#39;Baratheon&#39;</span>,<span class="st">&#39;Targaryen&#39;</span>)
<span class="kw">paste</span>( first.names, last.names)</code></pre></div>
<pre><code>## [1] &quot;Robb Stark&quot;         &quot;Stannis Baratheon&quot;  &quot;Daenerys Targaryen&quot;</code></pre>
<p>If we want <code>paste()</code> produce just a single string of output, use the <code>collapse=</code> argument to paste together each of the output vectors (separated by the <code>collapse</code> character).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>( <span class="st">&quot;n =&quot;</span>, <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">25</span>,<span class="dv">100</span>) )  <span class="co"># Produces 3 strings</span></code></pre></div>
<pre><code>## [1] &quot;n = 5&quot;   &quot;n = 25&quot;  &quot;n = 100&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>( <span class="st">&quot;n =&quot;</span>, <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">25</span>,<span class="dv">100</span>), <span class="dt">collapse=</span><span class="st">&#39;:&#39;</span> ) <span class="co"># collapses output into one string</span></code></pre></div>
<pre><code>## [1] &quot;n = 5:n = 25:n = 100&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(first.names, last.names, <span class="dt">sep=</span><span class="st">&#39;.&#39;</span>, <span class="dt">collapse=</span><span class="st">&#39; : &#39;</span>)</code></pre></div>
<pre><code>## [1] &quot;Robb.Stark : Stannis.Baratheon : Daenerys.Targaryen&quot;</code></pre>
<p>Notice we could use the <code>paste()</code> command with the collapse option to combine a vector of character strings together.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(first.names, <span class="dt">collapse=</span><span class="st">&#39;:&#39;</span>)</code></pre></div>
<pre><code>## [1] &quot;Robb:Stannis:Daenerys&quot;</code></pre>
</div>
<div id="package-stringr-basic-operations" class="section level2">
<h2><span class="header-section-number">13.2</span> Package <code>stringr</code>: basic operations</h2>
<blockquote>
<p>The goal of stringr is to make a consistent user interface to a suite of functions to manipulate strings. “(stringr) is a set of simple wrappers that make R’s string functions more consistent, simpler and easier to use. It does this by ensuring that: function and argument names (and positions) are consistent, all functions deal with NA’s and zero length character appropriately, and the output data structures from each function matches the input data structures of other functions.” - Hadley Wickham</p>
</blockquote>
<p>We’ll investigate the most commonly used function but there are many we will ignore.</p>
<table>
<colgroup>
<col width="27%" />
<col width="72%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><code>str_c()</code></p></td>
<td><p>string concatenation, similar to paste</p></td>
</tr>
<tr class="even">
<td><p><code>str_length()</code></p></td>
<td><p>number of characters in the string</p></td>
</tr>
<tr class="odd">
<td><p><code>str_sub()</code></p></td>
<td><p>extract a substring</p></td>
</tr>
<tr class="even">
<td><p><code>str_trim()</code></p></td>
<td><p>remove leading and trailing whitespace</p></td>
</tr>
<tr class="odd">
<td><p><code>str_pad()</code></p></td>
<td><p>pad a string with empty space to make it a certain length</p></td>
</tr>
</tbody>
</table>
<div id="concatenating-with-str_c-or-str_join" class="section level3">
<h3><span class="header-section-number">13.2.1</span> Concatenating with <code>str_c()</code> or <code>str_join()</code></h3>
<p>The first thing we do is to concatenate two strings or two vectors of strings similarly to the <code>paste()</code> command. The <code>str_c()</code> and <code>str_join()</code> functions are a synonym for the exact same function, but str_join() might be a more natural verb to use and remember. The syntax is:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_c</span>( ..., <span class="dt">sep=</span><span class="st">&#39;&#39;</span>, <span class="dt">collapse=</span><span class="ot">NULL</span>)</code></pre></div>
<p>You can think of the inputs building a matrix of strings, with each input creating a column of the matrix. For each row, <code>str_c()</code> first joins all the columns (using the separator character given in <code>sep</code>) into a single column of strings. If the collapse argument is non-NULL, the function takes the vector and joins each element together using collapse as the separator character.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load the stringr library</span>
<span class="kw">library</span>(stringr)

<span class="co"># envisioning the matrix of strings</span>
<span class="kw">cbind</span>(first.names, last.names)</code></pre></div>
<pre><code>##      first.names last.names 
## [1,] &quot;Robb&quot;      &quot;Stark&quot;    
## [2,] &quot;Stannis&quot;   &quot;Baratheon&quot;
## [3,] &quot;Daenerys&quot;  &quot;Targaryen&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># join the columns together</span>
full.names &lt;-<span class="st"> </span><span class="kw">str_c</span>( first.names, last.names, <span class="dt">sep=</span><span class="st">&#39;.&#39;</span>)
<span class="kw">cbind</span>( first.names, last.names, full.names)</code></pre></div>
<pre><code>##      first.names last.names  full.names          
## [1,] &quot;Robb&quot;      &quot;Stark&quot;     &quot;Robb.Stark&quot;        
## [2,] &quot;Stannis&quot;   &quot;Baratheon&quot; &quot;Stannis.Baratheon&quot; 
## [3,] &quot;Daenerys&quot;  &quot;Targaryen&quot; &quot;Daenerys.Targaryen&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Join each of the rows together separated by collapse</span>
<span class="kw">str_c</span>( first.names, last.names, <span class="dt">sep=</span><span class="st">&#39;.&#39;</span>, <span class="dt">collapse=</span><span class="st">&#39; : &#39;</span>)</code></pre></div>
<pre><code>## [1] &quot;Robb.Stark : Stannis.Baratheon : Daenerys.Targaryen&quot;</code></pre>
</div>
<div id="calculating-string-length-with-str_length" class="section level3">
<h3><span class="header-section-number">13.2.2</span> Calculating string length with <code>str_length()</code></h3>
<p>The <code>str_length()</code> function calculates the length of each string in the vector of strings passed to it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">text &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;WordTesting&#39;</span>, <span class="st">&#39;With a space&#39;</span>, <span class="ot">NA</span>, <span class="st">&#39;Night&#39;</span>)
<span class="kw">str_length</span>( text )</code></pre></div>
<pre><code>## [1] 11 12 NA  5</code></pre>
<p>Notice that <code>str_length()</code> correctly interprets the missing data as missing and that the length ought to also be missing.</p>
</div>
<div id="extracting-substrings-with-str_sub" class="section level3">
<h3><span class="header-section-number">13.2.3</span> Extracting substrings with <code>str_sub()</code></h3>
<p>If we know we want to extract the <span class="math inline">\(3^{rd}\)</span> through <span class="math inline">\(6^{th}\)</span> letters in a string, this function will grab them.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_sub</span>(text, <span class="dt">start=</span><span class="dv">3</span>, <span class="dt">end=</span><span class="dv">6</span>)</code></pre></div>
<pre><code>## [1] &quot;rdTe&quot; &quot;th a&quot; NA     &quot;ght&quot;</code></pre>
<p>If a given string isn’t long enough to contain all the necessary indices, <code>str_sub()</code> returns only the letters that where there (as in the above case for “Night”</p>
</div>
<div id="pad-a-string-with-str_pad" class="section level3">
<h3><span class="header-section-number">13.2.4</span> Pad a string with <code>str_pad()</code></h3>
<p>Sometimes we to make every string in a vector the same length to facilitate display or in the creation of a uniform system of assigning ID numbers. The <code>str_pad()</code> function will add spaces at either the beginning or end of the of every string appropriately.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_pad</span>(first.names, <span class="dt">width=</span><span class="dv">8</span>)</code></pre></div>
<pre><code>## [1] &quot;    Robb&quot; &quot; Stannis&quot; &quot;Daenerys&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_pad</span>(first.names, <span class="dt">width=</span><span class="dv">8</span>, <span class="dt">side=</span><span class="st">&#39;right&#39;</span>, <span class="dt">pad=</span><span class="st">&#39;*&#39;</span>)</code></pre></div>
<pre><code>## [1] &quot;Robb****&quot; &quot;Stannis*&quot; &quot;Daenerys&quot;</code></pre>
</div>
<div id="trim-a-string-with-str_trim" class="section level3">
<h3><span class="header-section-number">13.2.5</span> Trim a string with <code>str_trim()</code></h3>
<p>This removes any leading or trailing whitespace where whitespace is defined as spaces ‘’, tabs <code>\t</code> or returns <code>\n</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">text &lt;-<span class="st"> &#39; Some text. </span><span class="ch">\n</span><span class="st">  &#39;</span>
<span class="kw">print</span>(text)</code></pre></div>
<pre><code>## [1] &quot; Some text. \n  &quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_trim</span>(text)</code></pre></div>
<pre><code>## [1] &quot;Some text.&quot;</code></pre>
</div>
</div>
<div id="package-stringr-pattern-matching" class="section level2">
<h2><span class="header-section-number">13.3</span> Package <code>stringr</code>: Pattern Matching</h2>
<p>The previous commands are all quite useful but the most powerful string operation is take a string and match some pattern within it. The following commands are available within <code>stringr</code>.</p>
<table>
<colgroup>
<col width="32%" />
<col width="67%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><code>str_detect()</code></p></td>
<td><p>Detect if a pattern occurs in input string</p></td>
</tr>
<tr class="even">
<td><p><code>str_locate()</code> <code>str_locate_all()</code></p></td>
<td><p>Locates the first (or all) positions of a pattern.</p></td>
</tr>
<tr class="odd">
<td><p><code>str_extract()</code> <code>str_extract_all()</code></p></td>
<td><p>Extracts the first (or all) substrings corresponding to a pattern</p></td>
</tr>
<tr class="even">
<td><p><code>str_replace()</code> <code>str_replace_all()</code></p></td>
<td><p>Replaces the matched substring(s) with a new pattern</p></td>
</tr>
<tr class="odd">
<td><p><code>str_split()</code> <code>str_split_fixed()</code></p></td>
<td><p>Splits the input string based on the inputed pattern</p></td>
</tr>
</tbody>
</table>
<p>We will first examine these functions using a very simple pattern matching algorithm where we are matching a specific pattern. For most people, this is as complex as we need.</p>
<p>Suppose that we have a vector of strings that contain a date in the form “2012-May-27” and we want to manipulate them to extract certain information.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test.vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;2008-Feb-10&#39;</span>, <span class="st">&#39;2010-Sept-18&#39;</span>, <span class="st">&#39;2013-Jan-11&#39;</span>, <span class="st">&#39;2016-Jan-2&#39;</span>)</code></pre></div>
<div id="detecting-a-pattern-using-str_detect" class="section level3">
<h3><span class="header-section-number">13.3.1</span> Detecting a pattern using str_detect()</h3>
<p>Suppose we want to know which dates are in September. We want to detect if the pattern “Sept” occurs in the strings. It is important that I used fixed(“Sept”) in this code to “turn off” the complicated regular expression matching rules and just look for exactly what I specified.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_detect</span>( test.vector, <span class="dt">pattern=</span><span class="kw">fixed</span>(<span class="st">&#39;Sept&#39;</span>) )</code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE FALSE</code></pre>
<p>Here we see that the second string in the test vector included the substring “Sept” but none of the others did.</p>
</div>
<div id="locating-a-pattern-using-str_locate" class="section level3">
<h3><span class="header-section-number">13.3.2</span> Locating a pattern using str_locate()</h3>
<p>To figure out where the “-” characters are, we can use the <code>str_locate()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_locate</span>(test.vector, <span class="dt">pattern=</span><span class="kw">fixed</span>(<span class="st">&#39;-&#39;</span>) )</code></pre></div>
<pre><code>##      start end
## [1,]     5   5
## [2,]     5   5
## [3,]     5   5
## [4,]     5   5</code></pre>
<p>which shows that the first dash occurs as the <span class="math inline">\(5^{th}\)</span> character in each string. If we wanted all the dashes in the string the following works.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_locate_all</span>(test.vector, <span class="dt">pattern=</span><span class="kw">fixed</span>(<span class="st">&#39;-&#39;</span>) )</code></pre></div>
<pre><code>## [[1]]
##      start end
## [1,]     5   5
## [2,]     9   9
## 
## [[2]]
##      start end
## [1,]     5   5
## [2,]    10  10
## 
## [[3]]
##      start end
## [1,]     5   5
## [2,]     9   9
## 
## [[4]]
##      start end
## [1,]     5   5
## [2,]     9   9</code></pre>
<p>The output of <code>str_locate_all()</code> is a list of matrices that gives the start and end of each matrix. Using this information, we could grab the Year/Month/Day information out of each of the dates. We won’t do that here because it will be easier to do this using <code>str_split()</code>.</p>
</div>
<div id="replacing-substrings-using-str_replace" class="section level3">
<h3><span class="header-section-number">13.3.3</span> Replacing substrings using <code>str_replace()</code></h3>
<p>Suppose we didn’t like using “-” to separate the Year/Month/Day but preferred a space, or an underscore, or something else. This can be done by replacing all of the “-” with the desired character. The <code>str_replace()</code> function only replaces the first match, but <code>str_replace_all()</code> replaces all matches.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_replace</span>(test.vector, <span class="dt">pattern=</span><span class="kw">fixed</span>(<span class="st">&#39;-&#39;</span>), <span class="dt">replacement=</span><span class="kw">fixed</span>(<span class="st">&#39;:&#39;</span>) )</code></pre></div>
<pre><code>## [1] &quot;2008:Feb-10&quot;  &quot;2010:Sept-18&quot; &quot;2013:Jan-11&quot;  &quot;2016:Jan-2&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_replace_all</span>(test.vector, <span class="dt">pattern=</span><span class="kw">fixed</span>(<span class="st">&#39;-&#39;</span>), <span class="dt">replacement=</span><span class="kw">fixed</span>(<span class="st">&#39;:&#39;</span>) )</code></pre></div>
<pre><code>## [1] &quot;2008:Feb:10&quot;  &quot;2010:Sept:18&quot; &quot;2013:Jan:11&quot;  &quot;2016:Jan:2&quot;</code></pre>
</div>
<div id="splitting-into-substrings-using-str_split" class="section level3">
<h3><span class="header-section-number">13.3.4</span> Splitting into substrings using <code>str_split()</code></h3>
<p>We can split each of the dates into three smaller substrings using the <code>str_split()</code> command, which returns a list where each element of the list is a vector containing pieces of the original string (excluding the pattern we matched on).</p>
<p>If we know that all the strings will be split into a known number of substrings (we have to specify how many substrings to match with the <code>n=</code> argument), we can use <code>str_split_fixed()</code> to get a matrix of substrings instead of list of substrings. It is somewhat unfortunate that the <code>_fixed</code> modifier to the function name is the same as what we use to specify to use simple pattern matching.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str_split_fixed</span>(test.vector, <span class="dt">pattern=</span><span class="kw">fixed</span>(<span class="st">&#39;-&#39;</span>), <span class="dt">n=</span><span class="dv">3</span>)</code></pre></div>
<pre><code>##      [,1]   [,2]   [,3]
## [1,] &quot;2008&quot; &quot;Feb&quot;  &quot;10&quot;
## [2,] &quot;2010&quot; &quot;Sept&quot; &quot;18&quot;
## [3,] &quot;2013&quot; &quot;Jan&quot;  &quot;11&quot;
## [4,] &quot;2016&quot; &quot;Jan&quot;  &quot;2&quot;</code></pre>
</div>
</div>
<div id="regular-expressions" class="section level2">
<h2><span class="header-section-number">13.4</span> Regular Expressions</h2>
<p>The next section will introduce using regular expressions. Regular expressions are a way to specify very complicated patterns. Go look at <a href="https://xkcd.com/208/" class="uri">https://xkcd.com/208/</a> to gain insight into just how geeky regular expressions are.</p>
<p>Regular expressions are a way of precisely writing out patterns that are very complicated. The stringr package pattern arguments can be given using standard regular expressions (not perl-style!) instead of using fixed strings.</p>
<p>Regular expressions are extremely powerful for sifting through large amounts of text. For example, we might want to extract all of the 4 digit substrings (the years) out of our dates vector, or I might want to find all cases in a paragraph of text of words that begin with a capital letter and are at least 5 letters long. In another, somewhat nefarious example, spammers might have downloaded a bunch of text from webpages and want to be able to look for email addresses. So as a first pass, they want to match a pattern: <span class="math display">\[\underset{\textrm{1 or more letters}}{\underbrace{\texttt{Username}}}\texttt{@}\;\;\underset{\textrm{1 or more letter}}{\underbrace{\texttt{OrganizationName}}}\;\texttt{.\;}\begin{cases}
\texttt{com}\\
\texttt{org}\\
\texttt{edu}
\end{cases}\]</span> where the <code>Username</code> and <code>OrganizationName</code> can be pretty much anything, but a valid email address looks like this. We might get even more creative and recognize that my list of possible endings could include country codes as well.</p>
<p>For most people, I don’t recommend opening the regular expression can-of-worms, but it is good to know that these pattern matching utilities are available within R and you don’t need to export your pattern matching problems to Perl or Python.</p>
</div>
<div id="exercises-12" class="section level2">
<h2><span class="header-section-number">13.5</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li>The following file names were used in a camera trap study. The S number represents the site, P is the plot within a site, C is the camera number within the plot, the first string of numbers is the YearMonthDay and the second string of numbers is the HourMinuteSecond.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">file.names &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="st">&#39;S123.P2.C10_20120621_213422.jpg&#39;</span>,
                 <span class="st">&#39;S10.P1.C1_20120622_050148.jpg&#39;</span>,
                 <span class="st">&#39;S187.P2.C2_20120702_023501.jpg&#39;</span>)</code></pre></div>
<p>Use a combination of <code>str_sub()</code> and <code>str_split()</code> to produce a data frame with columns corresponding to the <code>site</code>, <code>plot</code>, <code>camera</code>, <code>year</code>, <code>month</code>, <code>day</code>, <code>hour</code>, <code>minute</code>, and <code>second</code> for these three file names. So we want to produce code that will create the data frame:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> Site Plot Camera Year Month Day Hour Minute Second
 S123   P2    C10 <span class="dv">2012</span>    <span class="dv">06</span>  <span class="dv">21</span>   <span class="dv">21</span>     <span class="dv">34</span>     <span class="dv">22</span>
  S10   P1     C1 <span class="dv">2012</span>    <span class="dv">06</span>  <span class="dv">22</span>   <span class="dv">05</span>     <span class="dv">01</span>     <span class="dv">48</span>
 S187   P2     C2 <span class="dv">2012</span>    <span class="dv">07</span>  <span class="dv">02</span>   <span class="dv">02</span>     <span class="dv">35</span>     <span class="dv">01</span></code></pre></div>
<p><em>Hint: Convert all the dashes to periods and then split on the dots. After that you’ll have to further tear apart the date and time columns using str_sub().</em></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="12-user-defined-functions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="14-dates-and-times.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://raw.githubusercontent.com/dereksonderegger/570L/master/14_Strings.Rmd",
"text": "Edit"
},
"download": [["A_Sufficient_Introduction_to_R.pdf", "PDF"], ["A_Sufficient_Introduction_to_R.epub", "EPUB"]],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
